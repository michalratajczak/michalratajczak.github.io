{"mappings":"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","sources":["src/index.ts","src/scenes/menuScene.ts","src/global.ts","src/models/player/hero.ts","src/models/base/unit.ts","src/models/weapons/gun.ts","src/models/animations/bloodAfterShoot.ts","src/models/base/animation.ts","src/models/base/weapon.ts","src/models/projectiles/bullet.ts","src/scenes/gameScene.ts","src/views/hud.ts","src/services/enemyService.ts","src/models/enemies/zombie.ts","src/services/projectileService.ts","src/scenes/resultScene.ts","src/services/animationService.ts"],"sourcesContent":["import P5 from \"p5\"\r\nimport { MenuScene } from \"./scenes/menuScene\"\r\nimport { getCurrentScene, init, setCurrentScene } from \"./global\"\r\n\r\nconst sketch = (p5: P5) => {\r\n  p5.setup = () => {\r\n    const canvas = p5.createCanvas(p5.windowWidth, p5.windowHeight)\r\n    canvas.parent(\"app\")\r\n\r\n    init(p5)\r\n    setCurrentScene(new MenuScene())\r\n  }\r\n\r\n  p5.windowResized = () => {\r\n    p5.resizeCanvas(p5.windowWidth, p5.windowHeight)\r\n  }\r\n\r\n  p5.draw = () => {\r\n    p5.background(120)\r\n    const scene = getCurrentScene()\r\n\r\n    scene.init()\r\n    scene.draw()\r\n  }\r\n\r\n  p5.keyPressed = () => {\r\n    const scene = getCurrentScene()\r\n    scene.keyPressed()\r\n  }\r\n\r\n  p5.mouseClicked = () => {\r\n    const scene = getCurrentScene()\r\n    scene.mouseClicked()\r\n  } \r\n}\r\n\r\nnew P5(sketch)","import P5 from \"p5\"\r\nimport { p5, setCurrentScene } from \"../global\"\r\nimport { IScene } from \"../interfaces/scene\"\r\nimport { GameScene } from \"./gameScene\"\r\n\r\nexport class MenuScene implements IScene{\r\n  init = () => {\r\n\r\n  }\r\n\r\n  draw = () => {\r\n    p5.strokeWeight(0)\r\n    p5.textSize(80)\r\n    p5.textStyle(p5.BOLD)\r\n    p5.fill(p5.color(130, 40, 0))\r\n    const title = 'ShooterP5'\r\n    p5.text(title, p5.windowWidth / 2 - p5.textWidth(title) / 2, p5.windowHeight / 4)\r\n\r\n    p5.textStyle(p5.NORMAL)\r\n    p5.textSize(30)\r\n    p5.fill(20)\r\n\r\n    const controlsMoving = 'Moving:   [W] [A] [S] [D]'\r\n    p5.text(controlsMoving, p5.windowWidth / 2 - p5.textWidth(controlsMoving) / 2, p5.windowHeight / 2)\r\n\r\n    const controlsMouse = 'Shooting:   Left Mouse Button'\r\n    p5.text(controlsMouse, p5.windowWidth / 2 - p5.textWidth(controlsMouse) / 2, p5.windowHeight / 2 + 40)    \r\n\r\n    const controlsReloading = 'Reloading:   [R]'\r\n    p5.text(controlsReloading, p5.windowWidth / 2 - p5.textWidth(controlsReloading) / 2, p5.windowHeight / 2 + 80)    \r\n\r\n    p5.textStyle(p5.NORMAL)\r\n    p5.textSize(40)\r\n    const menuText = `Press [ SPACE ] to start game`\r\n    p5.text(menuText, p5.windowWidth / 2 - p5.textWidth(menuText) / 2, p5.windowHeight * 3 / 4)\r\n  }\r\n\r\n  keyPressed = () => {\r\n    if (p5.keyCode === 32) {//space\r\n      setCurrentScene(new GameScene())\r\n    }\r\n  }\r\n\r\n  mouseClicked = () => {\r\n\r\n  }\r\n}","import P5 from \"p5\"\r\nimport { IScene } from \"./interfaces/scene\"\r\nimport { IAnimation } from \"./models/base/animation\"\r\nimport { IProjectile } from \"./models/base/projectile\"\r\nimport { IUnit } from \"./models/base/unit\"\r\nimport { Hero } from \"./models/player/hero\"\r\n\r\nexport let p5: P5\r\nlet _currentScene: IScene\r\nlet _hero: Hero \r\nlet _enemies: IUnit[]\r\nlet _score: number\r\nlet _projectiles: IProjectile[]\r\nlet _animations: IAnimation[]\r\n\r\nexport const init = (P5: P5) => {\r\n  p5 = P5\r\n  restartGame()\r\n}\r\n\r\nexport const restartGame = () => {\r\n  _hero = new Hero(2.5, 30, p5.createVector(p5.windowWidth / 2, p5.windowHeight / 2), 1)\r\n  _enemies = []\r\n  _score = 0\r\n  _projectiles = []\r\n  _animations = []\r\n}\r\n\r\nexport const getCurrentScene = () => _currentScene\r\nexport const setCurrentScene = (scene: IScene) => {\r\n  _currentScene = scene\r\n}\r\n\r\nexport const getHero = () => _hero\r\n\r\nexport const getEnemies = () => _enemies\r\nexport const addEnemy = (e: IUnit) => {\r\n  _enemies.push(e)\r\n}\r\nexport const delEnemy = (e: IUnit) => {\r\n  const idx = _enemies.indexOf(e)\r\n  if (idx >= 0) {\r\n    _enemies.splice(idx, 1)\r\n  }\r\n}\r\n\r\nexport const getScore = () => _score\r\nexport const addScore = (scores: number) => {\r\n  return _score += scores\r\n}\r\n\r\nexport const getProjectiles = () => _projectiles\r\nexport const addProjectile = (p: IProjectile) => {\r\n  _projectiles.push(p)\r\n}\r\nexport const delProjectile = (p: IProjectile) => {\r\n  const idx = _projectiles.indexOf(p)\r\n  if (idx >= 0) {\r\n    _projectiles.splice(idx, 1)\r\n  }\r\n}\r\n\r\nexport const getAnimations = () => _animations\r\nexport const addAnimation = (a: IAnimation) => {\r\n  _animations.push(a)\r\n}\r\nexport const delAnimation = (a: IAnimation) => {\r\n  const idx = _animations.indexOf(a)\r\n  if (idx >= 0) {\r\n    _animations.splice(idx, 1)\r\n  }\r\n}\r\n","import { Vector } from \"p5\";\r\nimport { p5 } from \"../../global\";\r\nimport { Unit } from \"../base/unit\";\r\nimport { IWeapon } from \"../base/weapon\";\r\nimport { Gun } from \"../weapons/gun\";\r\n\r\nexport class Hero extends Unit {  \r\n  weapon: IWeapon\r\n\r\n  constructor(speed: number, size: number, position: Vector, health: number) {\r\n    super(speed, size, position, health)\r\n    this.color = p5.color(130, 40, 0)\r\n    this.weapon = new Gun()\r\n  }\r\n\r\n  getMoveDirection(): Vector {\r\n    const v = p5.createVector(0, 0)\r\n\r\n    if(p5.keyIsDown(87)) // W\r\n      v.y -= 1\r\n    if(p5.keyIsDown(83)) // S\r\n      v.y += 1\r\n    if(p5.keyIsDown(65)) // A\r\n      v.x -= 1\r\n    if(p5.keyIsDown(68)) // D\r\n      v.x += 1\r\n\r\n    return v\r\n  }\r\n\r\n  move(v: Vector): void {    \r\n    this.position.add(v.mult(this.speed))\r\n    const x = p5.constrain(this.position.x, 30, p5.windowWidth - 30)\r\n    const y = p5.constrain(this.position.y, 30, p5.windowHeight - 30)\r\n    this.position = p5.createVector(x, y)\r\n  }\r\n\r\n  draw(): void {\r\n    this.weapon.draw(this.position, this.size / 2)\r\n    p5.strokeWeight(2)\r\n    p5.fill(this.color)\r\n    p5.circle(this.position.x, this.position.y, this.size)\r\n  }\r\n\r\n  attack(): void {\r\n    this.weapon.attack(this)\r\n  }\r\n\r\n  reload(): void {\r\n    this.weapon.reload()\r\n  }\r\n}","import { Vector, Color } from \"p5\"\r\nimport { p5 } from \"../../global\"\r\n\r\nexport interface IUnit {\r\n  position: Vector\r\n  size: number\r\n  speed: number\r\n  color: Color\r\n  health: number\r\n  maxHealth: number\r\n\r\n  move(v: Vector): void\r\n  draw(): void\r\n}\r\n\r\nexport class Unit implements IUnit {\r\n  position: Vector\r\n  size: number\r\n  speed: number\r\n  color: Color\r\n  health: number\r\n  maxHealth: number\r\n\r\n  constructor(speed: number, size: number, position: Vector, health: number) {\r\n    this.speed = speed\r\n    this.size = size\r\n    this.position = position\r\n    this.color = p5.color(80)\r\n    this.health = health\r\n    this.maxHealth = health\r\n  }\r\n\r\n  move(v: Vector): void {\r\n    this.position.add(v.mult(this.speed))\r\n  }\r\n\r\n  draw(): void {\r\n    //body\r\n    p5.strokeWeight(2)\r\n    p5.fill(this.color)\r\n    p5.circle(this.position.x, this.position.y, this.size)\r\n\r\n    //health\r\n    p5.textSize(16)\r\n    p5.fill(0)\r\n    const healthText = Math.round(this.health / this.maxHealth * 100) + '%'\r\n    p5.text(healthText, this.position.x - p5.textWidth(healthText) / 2, this.position.y + 7)\r\n  }\r\n}","import P5, { Vector } from \"p5\";\r\nimport { addAnimation, addProjectile, delProjectile, p5 } from \"../../global\";\r\nimport { BloodAfterShoot } from \"../animations/bloodAfterShoot\";\r\nimport { IProjectile } from \"../base/projectile\";\r\nimport { IUnit } from \"../base/unit\";\r\nimport { RangedWeapon } from \"../base/weapon\";\r\nimport { Bullet } from \"../projectiles/bullet\";\r\n\r\nexport class Gun extends RangedWeapon {\r\n  constructor() {\r\n    super(9, 60, 8, 5)\r\n  }\r\n\r\n  shot(unit: IUnit, target: P5.Vector): void {\r\n    const gun = target.sub(unit.position).normalize()\r\n    const bullet = new Bullet(unit.position.copy(), \r\n      gun.copy().normalize().mult(this.weaponSpeed), 3, unit, p5.color(10), \r\n      (unit: IUnit, bullet: IProjectile) => this.onBulletCollision(unit, bullet), \r\n      (bullet: IProjectile) => this.onBulletDestroy(bullet))\r\n    addProjectile(bullet)\r\n  }\r\n  \r\n  draw(position: P5.Vector, unitSize: number): void {\r\n    super.draw(position, unitSize)\r\n    const target = p5.createVector(p5.mouseX, p5.mouseY)\r\n    const gun = target.sub(position).normalize().mult(unitSize + 10).add(position)\r\n    p5.stroke(0)\r\n    p5.strokeWeight(5)\r\n    p5.line(position.x, position.y, gun.x, gun.y)\r\n  }\r\n\r\n  onBulletCollision(unit: IUnit, bullet: IProjectile) {\r\n    this.dealDamage(unit)\r\n    addAnimation(new BloodAfterShoot(bullet.projectile, bullet.speed))\r\n    this.onBulletDestroy(bullet)\r\n  }\r\n\r\n  onBulletDestroy(bullet: IProjectile) {\r\n    delProjectile(bullet)\r\n  }\r\n}","import { Vector } from \"p5\";\r\nimport { delAnimation, p5 } from \"../../global\";\r\nimport { AnimationType, IAnimation } from \"../base/animation\";\r\n\r\nexport class BloodAfterShoot implements IAnimation {\r\n  duration: number\r\n  step: number\r\n  position: Vector\r\n  direction: Vector\r\n  type: AnimationType\r\n\r\n  constructor(position: Vector, direction: Vector) {\r\n    this.duration = 180\r\n    this.step = 0\r\n    this.position = position.copy()\r\n    this.direction = direction.copy().mult(0.6)\r\n    this.type = AnimationType.dynamic\r\n  }\r\n\r\n  draw(): void {\r\n    if (this.step >= this.duration) {\r\n      delAnimation(this)\r\n      return\r\n    }\r\n    p5.strokeWeight(0)\r\n\r\n    if (this.step < 20) {\r\n      p5.fill(p5.color(230, 0 , 0, 255))\r\n      p5.circle(this.position.x, this.position.y, 5 + this.step / 2)\r\n      this.position.add(this.direction)\r\n    } else if (this.step === 20) {\r\n      this.type = AnimationType.static \r\n    } else if (this.step < 100) {\r\n      p5.fill(p5.color(250 - this.step, 0 , 0, 255))\r\n      p5.circle(this.position.x, this.position.y, 15)\r\n    } else {\r\n      p5.fill(p5.color(150, 0 , 0, 255 - (this.step - 100) * 2.55))\r\n      p5.circle(this.position.x, this.position.y, 15)\r\n    }\r\n\r\n    this.step++\r\n  }\r\n}","import { Vector } from \"p5\"\r\n\r\nexport interface IAnimation {\r\n  duration: number\r\n  step: number\r\n  position: Vector\r\n  direction: Vector\r\n  type: AnimationType\r\n\r\n  draw(): void\r\n}\r\n\r\nexport enum AnimationType {\r\n  static = 1,\r\n  dynamic = 2\r\n}","import P5, { Vector } from \"p5\"\r\nimport { p5 } from \"../../global\"\r\nimport { IUnit } from \"./unit\"\r\n\r\nexport interface IWeapon {  \r\n  _isReloading: boolean\r\n  ammo: number\r\n  reloadingTime: number\r\n  reloadingStep: number\r\n  damage: number\r\n\r\n  attack(attacker: IUnit): void\r\n  reload(): void\r\n  isReloading(): boolean\r\n  getMaxAmmo(): number\r\n  dealDamage(enemy: IUnit): void\r\n  draw(position: P5.Vector, unitSize: number): void\r\n}\r\n\r\n\r\nexport class RangedWeapon implements IWeapon {\r\n  _isReloading: boolean\r\n  maxAmmo: number\r\n  ammo: number\r\n  reloadingTime: number\r\n  reloadingStep: number\r\n  weaponSpeed: number\r\n  damage: number\r\n\r\n  constructor(maxAmmo: number, reloadingTime: number, weaponSpeed: number, damage: number) {\r\n    this.maxAmmo = maxAmmo\r\n    this.ammo = maxAmmo\r\n    this.reloadingTime = reloadingTime\r\n    this.reloadingStep = 0\r\n    this.weaponSpeed = weaponSpeed\r\n    this.damage = damage\r\n    this._isReloading = false\r\n  }\r\n\r\n  shot(unit: IUnit, target: P5.Vector): void {}\r\n  draw(position: P5.Vector, unitSize: number): void {\r\n    if (this._isReloading) {\r\n      if (this.reloadingStep === this.reloadingTime) {\r\n        this._isReloading = false\r\n        this.ammo = this.maxAmmo\r\n      }\r\n      this.reloadingStep++\r\n    }\r\n  }  \r\n  \r\n  attack(attacker: IUnit): void {\r\n    if (!this._isReloading && this.ammo > 0) {\r\n      const target = p5.createVector(p5.mouseX, p5.mouseY)\r\n      this.shot(attacker, target)\r\n      this.ammo--\r\n    }\r\n    if (this.ammo <= 0) {\r\n      this.reload()\r\n    }\r\n  }\r\n  reload(): void {\r\n    if (!this._isReloading) {\r\n      this._isReloading = true\r\n      this.reloadingStep = 0\r\n    }\r\n  }\r\n  isReloading(): boolean {\r\n    return this._isReloading\r\n  }\r\n  getMaxAmmo(): number {\r\n    return this.maxAmmo\r\n  }\r\n  dealDamage(enemy: IUnit): void {\r\n    enemy.health -= this.damage\r\n  }\r\n}","import { Color, Vector } from \"p5\"\r\nimport { delProjectile, p5 } from \"../../global\"\r\nimport { IProjectile } from \"../base/projectile\"\r\nimport { IUnit } from \"../base/unit\"\r\n\r\nexport class Bullet implements IProjectile {\r\n  start: Vector\r\n  speed: Vector\r\n  projectile: Vector\r\n  size: number\r\n  owner: IUnit\r\n  color: Color\r\n  range: number\r\n\r\n  onCollision: Function\r\n  onDestroy: Function\r\n\r\n  constructor(start: Vector, speed: Vector, size: number, owner: IUnit,\r\n    color: Color, onCollision: Function, onDestroy: Function) {\r\n    this.start = start\r\n    this.speed = speed\r\n    this.projectile = start.copy()\r\n    this.size = size\r\n    this.owner = owner\r\n    this.color = color\r\n    this.onCollision = onCollision\r\n    this.onDestroy = onDestroy\r\n    this.range = p5.windowWidth > p5.windowHeight ? p5.windowWidth : p5.windowHeight\r\n  }\r\n\r\n  move() {\r\n    if (this.projectile.dist(this.start) <= this.range) {      \r\n      this.projectile.add(this.speed)\r\n    } else {\r\n      this.onDestroy(this)\r\n    }\r\n  }\r\n\r\n  draw() {\r\n    p5.fill(this.color)\r\n    p5.circle(this.projectile.x, this.projectile.y, this.size)\r\n  }\r\n} ","import { Hud } from \"../views/hud\"\r\nimport enemyService from \"../services/enemyService\"\r\nimport { addScore, getHero, getProjectiles, getScore, p5, restartGame, setCurrentScene } from \"../global\"\r\nimport { Zombie } from \"../models/enemies/zombie\"\r\nimport projectileService from \"../services/projectileService\"\r\nimport { IScene } from \"../interfaces/scene\"\r\nimport { ResultScene } from \"./resultScene\"\r\nimport animationService from \"../services/animationService\"\r\n\r\nexport class GameScene implements IScene {\r\n  isInitialized: boolean\r\n  hud: Hud\r\n  \r\n  constructor() {\r\n    this.isInitialized = false\r\n  }\r\n\r\n  init = () => {\r\n    if (!this.isInitialized) {\r\n      restartGame()\r\n      this.hud = new Hud()\r\n      this.isInitialized = true\r\n    }\r\n  }\r\n\r\n  draw = () => {\r\n    try\r\n    {\r\n      const es = enemyService()\r\n      const ps = projectileService()\r\n      const as = animationService()\r\n      \r\n      //calculations\r\n      const heroDirection = getHero().getMoveDirection()\r\n      getHero().move(heroDirection)\r\n      \r\n      const newEnemy = es.createEnemy()\r\n      if (newEnemy) es.spawnEnemy(newEnemy)\r\n\r\n      es.moveEnemies()\r\n      ps.moveProjectiles()\r\n      \r\n      addScore(es.calculateDamage())\r\n  \r\n      //drawing\r\n      as.drawStaticAnimations()\r\n      es.drawEnemies()\r\n      ps.drawProjectiles()\r\n      getHero().draw()\r\n      as.drawDynamicAnimations()\r\n      this.hud.draw(p5, getHero(), getScore())\r\n    }\r\n    catch(e: any) {\r\n      if (e.message === 'GAME OVER') {\r\n        setCurrentScene(new ResultScene())\r\n      }   \r\n      else console.error(e)\r\n    }\r\n  }\r\n\r\n  keyPressed = () => {\r\n    if (p5.keyCode === 82) {//R\r\n      getHero().reload()\r\n    }\r\n  }\r\n\r\n  mouseClicked = () => {\r\n    getHero().attack()\r\n  }\r\n}","import { getHero, getScore, p5 } from '../global'\r\n\r\nexport class Hud {\r\n  draw() : void {\r\n    p5.strokeWeight(2)\r\n    p5.fill(0)\r\n\r\n    p5.textSize(24)\r\n    p5.text('AMMO:', 20, p5.windowHeight - 20)\r\n    p5.text(`SCORE: ${getScore()}`, 20, 40)\r\n\r\n    const weapon = getHero().weapon\r\n\r\n    for(let i = 1; i <= weapon.getMaxAmmo(); i++) {\r\n      if (i > weapon.ammo) {\r\n        p5.noFill()\r\n      }\r\n      p5.rect(90 + 20 * i, p5.windowHeight - 45, 13, 30)\r\n    }\r\n    \r\n    if (weapon.isReloading()) {\r\n      p5.fill(0)\r\n      p5.strokeWeight(0)\r\n      p5.rect(110, p5.windowHeight - 65, (weapon.reloadingStep / weapon.reloadingTime) * weapon.getMaxAmmo() * 20 - 7, 10)\r\n    }\r\n  }\r\n}","import { addEnemy, delEnemy, delProjectile, getEnemies, getHero, getProjectiles, p5 } from \"../global\"\r\nimport { IUnit, Unit } from \"../models/base/unit\"\r\nimport { Zombie } from \"../models/enemies/zombie\"\r\n\r\nconst enemyService = () => {\r\n  const createEnemy = (): IUnit => {\r\n    if (p5.frameCount % 120 == 0) {\r\n      return new Zombie(1.2, 50, p5.createVector(0, 0), 30)\r\n    }\r\n    else return null\r\n  }\r\n\r\n  const spawnEnemy = (enemy: IUnit) => {\r\n    const outerSide = p5.random(['x', 'y'])\r\n    let x: number, y: number\r\n    if (outerSide === 'x') {\r\n      x = p5.random(0, 1) > 0.5 ? p5.windowWidth + 100 : -100\r\n      y = p5.random(0, p5.windowHeight)\r\n    } else {\r\n      x = p5.random(0, p5.windowWidth)\r\n      y = p5.random(0, 1) > 0.5 ? p5.windowHeight + 100 : -100\r\n    }     \r\n    enemy.position = p5.createVector(x, y)\r\n    addEnemy(enemy)\r\n  }\r\n\r\n  const moveEnemies = () => {\r\n    const enemiesToAbsorb = []\r\n    for (const enemy of getEnemies()) {\r\n      const v = getHero().position.copy().sub(enemy.position).normalize().mult(enemy.speed)\r\n      enemy.position.add(v)\r\n\r\n      for (const other of getEnemies()) {\r\n        if (enemy === other) continue\r\n        if (enemiesToAbsorb.some(e => e.absorbed === enemy)) continue\r\n        if (other.size > enemy.size) continue\r\n        if (enemy.position.dist(other.position) < (enemy.size / 2) - (other.size / 4)) {\r\n          enemy.health += other.health\r\n          enemy.maxHealth += other.maxHealth\r\n          enemiesToAbsorb.push({\r\n            grow: enemy,\r\n            absorbed: other\r\n          })                  \r\n        }\r\n      }      \r\n    }    \r\n\r\n    for (const x of enemiesToAbsorb) {\r\n      x.grow.size += 5\r\n      x.speed *= 0.90\r\n      delEnemy(x.absorbed)\r\n    }\r\n  }\r\n\r\n  const drawEnemies = () => {\r\n    for (const enemy of getEnemies()) {\r\n      enemy.draw()\r\n    }\r\n  }\r\n\r\n  const calculateDamage = (): number => {\r\n    if (getEnemies().some(e => getHero().position.dist(e.position) < e.size / 2 + getHero().size / 2)) \r\n      throw new Error(\"GAME OVER\")\r\n    \r\n    const deadEnemies: Unit[] = []\r\n    for (const enemy of getEnemies()) {\r\n      for (const projectile of getProjectiles()) {\r\n        if (enemy.position.dist(projectile.projectile) < enemy.size / 2) {\r\n          projectile.onCollision(enemy, projectile)\r\n          if (enemy.health <= 0) deadEnemies.push(enemy)\r\n        }\r\n      } \r\n    }\r\n\r\n    for (let enemy of deadEnemies) {\r\n      delEnemy(enemy)\r\n    }\r\n\r\n    return deadEnemies.length\r\n  }\r\n\r\n  return {\r\n    spawnEnemy,\r\n    moveEnemies,\r\n    drawEnemies,\r\n    calculateDamage,\r\n    createEnemy\r\n  }\r\n}\r\n\r\nexport default enemyService","import { Vector } from \"p5\";\r\nimport { p5 } from \"../../global\";\r\nimport { Unit } from \"../base/unit\";\r\n\r\nexport class Zombie extends Unit {\r\n  constructor(speed: number, size: number, position: Vector, health: number) {\r\n    super(speed, size, position, health)\r\n    this.color = p5.color(50, 150, 0)\r\n  }\r\n}","import { getProjectiles } from \"../global\"\r\n\r\nconst projectileService = () => { \r\n\r\n  const moveProjectiles = () => {\r\n    for (const projectile of getProjectiles()) {\r\n      projectile.move()\r\n    }\r\n  }\r\n\r\n  const drawProjectiles = () => {\r\n    for (const projectile of getProjectiles()) {\r\n      projectile.draw()\r\n    }\r\n  }\r\n\r\n  return {\r\n    moveProjectiles,\r\n    drawProjectiles\r\n  }\r\n}\r\n\r\nexport default projectileService","import { getScore, p5, setCurrentScene } from \"../global\"\r\nimport { IScene } from \"../interfaces/scene\"\r\nimport { MenuScene } from \"./menuScene\"\r\n\r\nexport class ResultScene implements IScene {\r\n  init = () => {\r\n\r\n  }\r\n\r\n  draw = () => {\r\n    p5.strokeWeight(5)\r\n    p5.textSize(60)\r\n    p5.fill(60)\r\n    const resultText = `Your result: ${getScore()}!`\r\n    p5.text(resultText, p5.windowWidth / 2 - p5.textWidth(resultText) / 2, p5.windowHeight / 3)\r\n\r\n    p5.strokeWeight(0)\r\n    p5.textSize(40)\r\n    const menuText = `Press [ SPACE ] to go to main menu`\r\n    p5.text(menuText, p5.windowWidth / 2 - p5.textWidth(menuText) / 2, p5.windowHeight * 2 / 3)\r\n  }\r\n\r\n  keyPressed = () => {\r\n    if (p5.keyCode === 32) {//space\r\n      setCurrentScene(new MenuScene())\r\n    }\r\n  }\r\n\r\n  mouseClicked = () => {\r\n\r\n  }\r\n}","import { getAnimations } from \"../global\"\r\nimport { AnimationType } from \"../models/base/animation\"\r\n\r\n\r\nconst animationService = () => { \r\n  const drawDynamicAnimations = () => {\r\n    for (const animation of getAnimations().filter(a => a.type === AnimationType.dynamic)) {\r\n      animation.draw()\r\n    }\r\n  }\r\n\r\n  const drawStaticAnimations = () => {\r\n    for (const animation of getAnimations().filter(a => a.type === AnimationType.static)) {\r\n      animation.draw()\r\n    }\r\n  }\r\n\r\n  return {\r\n    drawDynamicAnimations,\r\n    drawStaticAnimations\r\n  }\r\n}\r\n\r\nexport default animationService"],"names":[],"version":3,"file":"main.js.map"}